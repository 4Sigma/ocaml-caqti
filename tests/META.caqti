# This allows loading caqtuses from the build directory by setting OCAMLPATH
# to the top source directory.

description = "Caqti loaded from the build directory"
directory = "../_build/lib"
requires = "calendar dynlink findlib uri"

package "lwt" (
  directory = "../_build/lib-lwt"
  archive(byte) = "caqti_lwt.cma"
  archive(native, plugin) = "caqti_lwt.cmxs"
  requires = "caqti lwt lwt.preemptive"
  exists_if = "caqti_lwt.cma"
)

package "caqtus-mariadb" (
  description = "Caqtus MariaDB loaded from the build directory"
  archive(byte) = "caqtus_mariadb.cma"
  archive(native, plugin) = "caqtus_mariadb.cmxs"
  requires = "calendar mariadb uri"
  exists_if = "caqtus_mariadb.cma"
)

package "caqtus-postgresql" (
  description = "Caqtus PostgreSQL loaded from the build directory"
  archive(byte) = "caqtus_postgresql.cma"
  archive(native, plugin) = "caqtus_postgresql.cmxs"
  requires = "calendar postgresql uri"
  exists_if = "caqtus_postgresql.cma"
)

package "caqtus-sqlite3" (
  description = "Caqtus SQLite3 loaded from the build directory"
  archive(byte) = "caqtus_sqlite3.cma"
  archive(native, plugin) = "caqtus_sqlite3.cmxs"
  requires = "calendar sqlite3 uri"
  exists_if = "caqtus_sqlite3.cma"
)
